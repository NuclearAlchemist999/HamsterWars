@page "/history"
@inject IBattleRepository _battle
@inject NavigationManager _nav

<div class="battle-list">

@foreach (var battle in _battle.Fighters)
{
    <div class="battle-item">
    <h4 class="@(battle.WinStatus == "Winner" ? "winner" : "loser")">@battle.WinStatus</h4>
    <p>@battle.HamsterName</p>  
   
    <div>
        @if (battle.WinStatus == "Winner")
        {
          <button type="button" class="btn btn-danger" @onclick="(() => RemoveGame(battle.GameId))">&times;</button>  
        }
    </div>

   </div>
}

</div>

@code {
   
    protected override async Task OnInitializedAsync()
    {
        await _battle.BattleHistory();
    }

    async Task RemoveGame(int id)
    {
        await _battle.DeleteGame(id);
        await _battle.DeleteFighters(id);
        _nav.NavigateTo("/history", true);

    }

}
